<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Amazon Sentiment Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="main_files/libs/clipboard/clipboard.min.js"></script>
<script src="main_files/libs/quarto-html/quarto.js"></script>
<script src="main_files/libs/quarto-html/popper.min.js"></script>
<script src="main_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="main_files/libs/quarto-html/anchor.min.js"></script>
<link href="main_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="main_files/libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="main_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="main_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="main_files/libs/bootstrap/bootstrap-a1ff8711b79ae3724c050874b28d9907.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a>
  <ul class="collapse">
  <li><a href="#inspiration" id="toc-inspiration" class="nav-link" data-scroll-target="#inspiration"><strong>Inspiration</strong></a></li>
  </ul></li>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data Cleaning</a>
  <ul class="collapse">
  <li><a href="#file-information" id="toc-file-information" class="nav-link" data-scroll-target="#file-information">File Information</a></li>
  <li><a href="#column-descriptors" id="toc-column-descriptors" class="nav-link" data-scroll-target="#column-descriptors">Column Descriptors</a></li>
  <li><a href="#feature-engineering" id="toc-feature-engineering" class="nav-link" data-scroll-target="#feature-engineering">Feature Engineering</a>
  <ul class="collapse">
  <li><a href="#k-cores" id="toc-k-cores" class="nav-link" data-scroll-target="#k-cores">K-cores</a></li>
  <li><a href="#define-length-thresholds-for-reviews" id="toc-define-length-thresholds-for-reviews" class="nav-link" data-scroll-target="#define-length-thresholds-for-reviews">Define Length Thresholds for Reviews</a></li>
  <li><a href="#categorize-sentiment" id="toc-categorize-sentiment" class="nav-link" data-scroll-target="#categorize-sentiment">Categorize Sentiment</a></li>
  <li><a href="#categorize-review-length" id="toc-categorize-review-length" class="nav-link" data-scroll-target="#categorize-review-length">Categorize Review Length</a></li>
  <li><a href="#balance-the-dataset" id="toc-balance-the-dataset" class="nav-link" data-scroll-target="#balance-the-dataset">Balance the Dataset</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#data-exploration" id="toc-data-exploration" class="nav-link" data-scroll-target="#data-exploration">Data Exploration</a>
  <ul class="collapse">
  <li><a href="#table-optimization" id="toc-table-optimization" class="nav-link" data-scroll-target="#table-optimization">Table Optimization</a></li>
  <li><a href="#data-summary" id="toc-data-summary" class="nav-link" data-scroll-target="#data-summary">Data Summary</a>
  <ul class="collapse">
  <li><a href="#data-imbalance" id="toc-data-imbalance" class="nav-link" data-scroll-target="#data-imbalance">Data Imbalance</a></li>
  <li><a href="#review-length-difference" id="toc-review-length-difference" class="nav-link" data-scroll-target="#review-length-difference">Review Length Difference</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Amazon Sentiment Analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="overview" class="level1">
<h1>Overview</h1>
<section id="inspiration" class="level2">
<h2 class="anchored" data-anchor-id="inspiration"><strong>Inspiration</strong></h2>
<p>This dataset can be used to build and evaluate machine learning models, such as sentiment analysis, product recommendation engines, and trend analysis tools. It is particularly useful for natural language processing (NLP) projects and big data analysis.</p>
</section>
</section>
<section id="data-cleaning" class="level1">
<h1>Data Cleaning</h1>
<p>This dataset contains a vast collection of Amazon product reviews and metadata across 29 categories, totaling over 75.29 million reviews from the year of 2018. The data was collected by scraping Amazon’s review pages and includes detailed information about each product and its associated reviews. <strong>Source Link:</strong> <a href="https://amazon-reviews-2023.github.io/" class="uri">https://amazon-reviews-2023.github.io/</a></p>
<section id="file-information" class="level3">
<h3 class="anchored" data-anchor-id="file-information">File Information</h3>
<p>The dataset is organized into 29 CSV files, each corresponding to a different product category. Each file contains reviews and associated metadata.</p>
<ul>
<li><p><strong>Amazon_Fashion.csv</strong>: 883,636 reviews</p></li>
<li><p><strong>All_Beauty.csv</strong>: 371,345 reviews</p></li>
<li><p><strong>Appliances.csv</strong>: 602,777 reviews</p></li>
<li><p><strong>Arts_Crafts_and_Sewing.csv</strong>: 2,875,917 reviews</p></li>
<li><p><strong>Automotive.csv</strong>: 7,990,166 reviews</p></li>
<li><p><strong>Books.csv</strong>: 51,311,621 reviews</p></li>
<li><p><strong>CDs_and_Vinyl.csv</strong>: 4,543,369 reviews</p></li>
<li><p><strong>Cell_Phones_and_Accessories.csv</strong>: 10,063,255 reviews</p></li>
<li><p><strong>Clothing_Shoes_and_Jewelry.csv</strong>: 32,292,099 reviews</p></li>
<li><p><strong>Digital_Music.csv</strong>: 1,584,082 reviews</p></li>
<li><p><strong>Electronics.csv</strong>: 20,994,353 reviews</p></li>
<li><p><strong>Gift_Cards.csv</strong>: 147,194 reviews</p></li>
<li><p><strong>Grocery_and_Gourmet_Food.csv</strong>: 5,074,160 reviews</p></li>
<li><p><strong>Home_and_Kitchen.csv</strong>: 21,928,568 reviews</p></li>
<li><p><strong>Industrial_and_Scientific.csv</strong>: 1,758,333 reviews</p></li>
<li><p><strong>Kindle_Store.csv</strong>: 5,722,988 reviews</p></li>
<li><p><strong>Luxury_Beauty.csv</strong>: 574,628 reviews</p></li>
<li><p><strong>Magazine_Subscriptions.csv</strong>: 89,689 reviews</p></li>
<li><p><strong>Movies_and_TV.csv</strong>: 8,765,568 reviews</p></li>
<li><p><strong>Musical_Instruments.csv</strong>: 1,512,530 reviews</p></li>
<li><p><strong>Office_Products.csv</strong>: 5,581,313 reviews</p></li>
<li><p><strong>Patio_Lawn_and_Garden.csv</strong>: 5,236,058 reviews</p></li>
<li><p><strong>Pet_Supplies.csv</strong>: 6,542,483 reviews</p></li>
<li><p><strong>Prime_Pantry.csv</strong>: 471,614 reviews</p></li>
<li><p><strong>Software.csv</strong>: 459,436 reviews</p></li>
<li><p><strong>Sports_and_Outdoors.csv</strong>: 12,980,837 reviews</p></li>
<li><p><strong>Tools_and_Home_Improvement.csv</strong>: 9,015,203 reviews</p></li>
<li><p><strong>Toys_and_Games.csv</strong>: 8,201,231 reviews</p></li>
<li><p><strong>Video_Games.csv</strong>: 2,565,349 reviews</p></li>
</ul>
</section>
<section id="column-descriptors" class="level3">
<h3 class="anchored" data-anchor-id="column-descriptors">Column Descriptors</h3>
<p>Each CSV file contains the following columns:</p>
<ul>
<li><p><strong>asin</strong>: The Amazon Standard Identification Number (ASIN) for the product.</p></li>
<li><p><strong>reviewText</strong>: The text of the review written by the customer.</p></li>
<li><p><strong>overall</strong>: The overall rating given by the customer (1 to 5 stars).</p></li>
<li><p><strong>category</strong>: The category of the product.</p></li>
<li><p><strong>summary</strong>: A brief summary of the review.</p></li>
</ul>
</section>
<section id="feature-engineering" class="level2">
<h2 class="anchored" data-anchor-id="feature-engineering">Feature Engineering</h2>
<section id="k-cores" class="level3">
<h3 class="anchored" data-anchor-id="k-cores">K-cores</h3>
<p>These data have been reduced to extract the&nbsp;<a href="https://en.wikipedia.org/wiki/Degeneracy_(graph_theory)">k-core</a>, such that each of the remaining users and items have k reviews each. This shrinks the size of the dataset to fit the purpose of this project. We then resample data (max 10,000 per category) to further reduce the data size to make it workable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Warning! Do not run this code block if you already have Amazon_Reviews_Processed.csv file in your directory.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table) <span class="co"># Used for fast data loading and manipulation.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr) <span class="co"># Provides useful string functions.</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Define thresholds for review length</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>length_thresholds <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">small =</span> <span class="dv">128</span>, <span class="at">medium =</span> <span class="dv">256</span>, <span class="at">large =</span> <span class="dv">512</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Define function to categorize sentiment</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>categorize_sentiment <span class="ot">&lt;-</span> <span class="cf">function</span>(overall) {</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (overall <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)) {</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">"negative"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (overall <span class="sc">==</span> <span class="dv">3</span>) {</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">"neutral"</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">"positive"</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Define function to categorize review length</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>categorize_length <span class="ot">&lt;-</span> <span class="cf">function</span>(text) {</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(text) <span class="sc">||</span> text <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NA</span>)  <span class="co"># Return NA for missing or empty values</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  length <span class="ot">&lt;-</span> <span class="fu">nchar</span>(<span class="fu">as.character</span>(text))  <span class="co"># Convert text to character before measuring length</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (length <span class="sc">&lt;=</span> length_thresholds<span class="sc">$</span>small) {</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">"small"</span>)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (length <span class="sc">&lt;=</span> length_thresholds<span class="sc">$</span>medium) {</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">"medium"</span>)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (length <span class="sc">&lt;=</span> length_thresholds<span class="sc">$</span>large) {</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">"large"</span>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">"outlier"</span>)</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="co"># List all CSV files in the dataset directory</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="co"># We loop through multiple CSV files so that we can process all review data, not just one file.</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>dataset_path <span class="ot">&lt;-</span> <span class="st">"data"</span>  <span class="co"># Change this to your dataset path</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dataset_path, <span class="at">pattern =</span> <span class="st">"*.csv"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty data.table to store the processed data</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>final_data <span class="ot">&lt;-</span> <span class="fu">data.table</span>()</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each file and process data</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (file <span class="cf">in</span> files) {</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Processing:"</span>, file, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read CSV file</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">fread</span>(file)</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ensure column names are correct</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ensures data integrity by skipping files that lack required information.</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>(<span class="st">"overall"</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) <span class="sc">||</span> <span class="sc">!</span>(<span class="st">"reviewText"</span> <span class="sc">%in%</span> <span class="fu">names</span>(df))) {</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Skipping file due to missing columns:"</span>, file, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Apply sentiment and length categorization</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Converts numerical ratings into sentiment labels</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>  df[, sentiment <span class="sc">:</span><span class="er">=</span> <span class="fu">sapply</span>(overall, categorize_sentiment)]</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>  df[, length <span class="sc">:</span><span class="er">=</span> <span class="fu">sapply</span>(reviewText, categorize_length)]</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove outlier reviews (long or empty reviews)</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df[length <span class="sc">!=</span> <span class="st">"outlier"</span>]</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initialize list for balanced sampling</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>  samples <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Loop through each sentiment category</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (sentiment <span class="cf">in</span> <span class="fu">c</span>(<span class="st">"negative"</span>, <span class="st">"neutral"</span>, <span class="st">"positive"</span>)) {</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>    sentiment_data <span class="ot">&lt;-</span> df[sentiment <span class="sc">==</span> sentiment]</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Loop through each length category</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (length <span class="cf">in</span> <span class="fu">c</span>(<span class="st">"small"</span>, <span class="st">"medium"</span>, <span class="st">"large"</span>)) {</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>      length_data <span class="ot">&lt;-</span> sentiment_data[length <span class="sc">==</span> length]</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Resample data (max 10,000 per category)</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">nrow</span>(length_data) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>        sampled_data <span class="ot">&lt;-</span> length_data[<span class="fu">sample</span>(.N, <span class="fu">min</span>(.N, <span class="dv">10000</span>))]</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>        samples <span class="ot">&lt;-</span> <span class="fu">append</span>(samples, <span class="fu">list</span>(sampled_data))</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine samples</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>  category_samples <span class="ot">&lt;-</span> <span class="fu">rbindlist</span>(samples, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Print statistics for current category</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Category:"</span>, <span class="fu">str_remove</span>(<span class="fu">basename</span>(file), <span class="st">"_5.csv"</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Total Samples:"</span>, <span class="fu">nrow</span>(category_samples), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Length Counts:"</span>, <span class="fu">table</span>(category_samples<span class="sc">$</span>length), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sentiment Counts:"</span>, <span class="fu">table</span>(category_samples<span class="sc">$</span>sentiment), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"--------------------------------------------------</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Append to final dataset</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>  final_data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(final_data, category_samples, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a><span class="co"># Save final processed dataset</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a><span class="fu">fwrite</span>(final_data, <span class="st">"Amazon_Reviews_Processed.csv"</span>)</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Data processing complete! Saved to Amazon_Reviews_Processed.csv</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="define-length-thresholds-for-reviews" class="level3">
<h3 class="anchored" data-anchor-id="define-length-thresholds-for-reviews">Define Length Thresholds for Reviews</h3>
<ul>
<li>We <strong>categorize reviews based on length</strong> to analyze how review length correlates with sentiment.</li>
<li><strong>Short reviews</strong> might have different sentiments compared to <strong>longer reviews</strong>.</li>
</ul>
</section>
<section id="categorize-sentiment" class="level3">
<h3 class="anchored" data-anchor-id="categorize-sentiment">Categorize Sentiment</h3>
<ul>
<li>Star ratings (<code>overall</code>) serve as <strong>a proxy for sentiment</strong>.</li>
<li>This function converts <strong>numerical ratings into categorical labels</strong> (<code>negative</code>, <code>neutral</code>, <code>positive</code>).</li>
</ul>
</section>
<section id="categorize-review-length" class="level3">
<h3 class="anchored" data-anchor-id="categorize-review-length">Categorize Review Length</h3>
<ul>
<li>Reviews are of <strong>varying lengths</strong>, and some could be <strong>too long (outliers)</strong>.</li>
<li><strong>Text length affects sentiment analysis</strong>—short reviews may be more <strong>emotional</strong>, while long ones may be more <strong>descriptive</strong>.</li>
</ul>
</section>
<section id="balance-the-dataset" class="level3">
<h3 class="anchored" data-anchor-id="balance-the-dataset">Balance the Dataset</h3>
<p>Some categories might have <strong>too many or too few reviews</strong>, so we:</p>
<ul>
<li><p><strong>Resample up to 10,000</strong> reviews per category.</p></li>
<li><p>Ensure <strong>each sentiment (<code>negative</code>, <code>neutral</code>, <code>positive</code>) is evenly distributed</strong>.</p></li>
</ul>
</section>
</section>
</section>
<section id="data-exploration" class="level1">
<h1>Data Exploration</h1>
<section id="table-optimization" class="level2">
<h2 class="anchored" data-anchor-id="table-optimization">Table Optimization</h2>
<p>This code block is designed to <strong>optimize memory usage and improve computational efficiency</strong> when working with a large dataset containing Amazon product reviews. The dataset has over <strong>3.1 million observations</strong>, making memory optimization crucial for smooth data processing and analysis. The code achieves this by converting columns to <strong>appropriate data types</strong>, such as:</p>
<ul>
<li><p><strong><code>overall</code> (ratings) → <code>integer</code></strong> to reduce memory compared to storing it as numeric.</p></li>
<li><p><strong><code>category</code>, <code>asin</code>, <code>length</code>, and <code>sentiment</code> → <code>factor</code></strong> to store categorical values efficiently instead of character strings.</p></li>
<li><p><strong><code>reviewText</code> and <code>summary</code> → <code>character</code></strong> since they are text-based and do not need factor encoding. By making these conversions, the dataset requires less memory and ensures that <strong>operations like filtering, grouping, and analysis run faster</strong>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)  <span class="co"># Efficient data handling</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"Amazon_Reviews_Processed.csv"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert data types for memory optimization</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>data[, overall <span class="sc">:</span><span class="er">=</span> <span class="fu">as.integer</span>(overall)]            <span class="co"># Convert ratings to integer</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>data[, category <span class="sc">:</span><span class="er">=</span> <span class="fu">as.factor</span>(category)]          <span class="co"># Convert categorical data to factor</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>data[, reviewText <span class="sc">:</span><span class="er">=</span> <span class="fu">as.character</span>(reviewText)]   <span class="co"># Convert review text to string</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>data[, summary <span class="sc">:</span><span class="er">=</span> <span class="fu">as.character</span>(summary)]         <span class="co"># Convert summary to string</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>data[, asin <span class="sc">:</span><span class="er">=</span> <span class="fu">as.factor</span>(asin)]                  <span class="co"># Convert product ID to factor</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>data[, length <span class="sc">:</span><span class="er">=</span> <span class="fu">as.factor</span>(length)]              <span class="co"># Convert length category to factor</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>data[, sentiment <span class="sc">:</span><span class="er">=</span> <span class="fu">as.factor</span>(sentiment)]        <span class="co"># Convert sentiment to factor</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Check memory usage after conversion</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">object.size</span>(data), <span class="at">units =</span> <span class="st">"MB"</span>)  <span class="co"># Print memory usage in MB</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>798.3 Mb</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)  <span class="co"># Display structure of the dataset</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Classes 'data.table' and 'data.frame':  3127185 obs. of  7 variables:
 $ asin      : Factor w/ 938133 levels "0000032034","000100039X",..: 258449 258449 330701 346213 330701 383852 383852 300253 790670 909013 ...
 $ reviewText: chr  "Great shampoo" "This brand is really nice for brunette hair color. The shampoo gives nice body, shine and condition. I love the"| __truncated__ "This shampoo cleans my hair well, lathers well, and smells good." "I bought this in hopes that it would help me get rid of this dandruff that began over winter that for some reas"| __truncated__ ...
 $ overall   : int  5 5 5 3 5 5 4 5 4 5 ...
 $ category  : Factor w/ 29 levels "All_Beauty_5",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ summary   : chr  "Five Stars" "This is a high quality shampoo for brunette hair.." "Great shampoo" "maybe my dandruff is a little bit better. It is a thick shampoo and I do ..." ...
 $ sentiment : Factor w/ 3 levels "negative","neutral",..: 3 3 3 2 3 3 3 3 3 3 ...
 $ length    : Factor w/ 3 levels "large","medium",..: 3 1 3 1 3 2 3 3 3 3 ...
 - attr(*, ".internal.selfref")=&lt;externalptr&gt; </code></pre>
</div>
</div>
</section>
<section id="data-summary" class="level2">
<h2 class="anchored" data-anchor-id="data-summary">Data Summary</h2>
<p>The purpose of this block of code is to <strong>provide a comprehensive summary of the dataset</strong> before performing any further analysis. It helps to <strong>understand the structure, distribution, and composition of the data</strong> by computing key statistics such as numerical summaries, categorical distributions, and data types.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"Amazon_Reviews_Processed.csv"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display numeric statistics (like Python's describe())</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"📊 Basic Statistics:"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "📊 Basic Statistics:"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     asin            reviewText           overall        category        
 Length:3127185     Length:3127185     Min.   :0.000   Length:3127185    
 Class :character   Class :character   1st Qu.:4.000   Class :character  
 Mode  :character   Mode  :character   Median :5.000   Mode  :character  
                                       Mean   :4.426                     
                                       3rd Qu.:5.000                     
                                       Max.   :5.000                     
   summary           sentiment            length         
 Length:3127185     Length:3127185     Length:3127185    
 Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character  
                                                         
                                                         
                                                         </code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display structure of the dataset (similar to .info())</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"🔍 Data Structure:"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "🔍 Data Structure:"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Classes 'data.table' and 'data.frame':  3127185 obs. of  7 variables:
 $ asin      : chr  "B00006L9LC" "B00006L9LC" "B000URXP6E" "B0012Y0ZG2" ...
 $ reviewText: chr  "Great shampoo" "This brand is really nice for brunette hair color. The shampoo gives nice body, shine and condition. I love the"| __truncated__ "This shampoo cleans my hair well, lathers well, and smells good." "I bought this in hopes that it would help me get rid of this dandruff that began over winter that for some reas"| __truncated__ ...
 $ overall   : num  5 5 5 3 5 5 4 5 4 5 ...
 $ category  : chr  "All_Beauty_5" "All_Beauty_5" "All_Beauty_5" "All_Beauty_5" ...
 $ summary   : chr  "Five Stars" "This is a high quality shampoo for brunette hair.." "Great shampoo" "maybe my dandruff is a little bit better. It is a thick shampoo and I do ..." ...
 $ sentiment : chr  "positive" "positive" "positive" "neutral" ...
 $ length    : chr  "small" "large" "small" "large" ...
 - attr(*, ".internal.selfref")=&lt;externalptr&gt; </code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display frequency counts for categorical variables</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"📌 Category Distribution:"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "📌 Category Distribution:"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">table</span>(data<span class="sc">$</span>category))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
                 All_Beauty_5              AMAZON_FASHION_5 
                        34146                         26505 
                 Appliances_5      Arts_Crafts_and_Sewing_5 
                         1557                         90000 
                 Automotive_5                       Books_5 
                        90000                        630000 
              CDs_and_Vinyl_5 Cell_Phones_and_Accessories_5 
                        90000                         90000 
 Clothing_Shoes_and_Jewelry_5               Digital_Music_5 
                       270000                         90000 
                Electronics_5                  Gift_Cards_5 
                       180000                         25983 
   Grocery_and_Gourmet_Food_5            Home_and_Kitchen_5 
                        90000                        180000 
  Industrial_and_Scientific_5                Kindle_Store_5 
                        90000                         90000 
              Luxury_Beauty_5      Magazine_Subscriptions_5 
                        90000                         17064 
              Movies_and_TV_5         Musical_Instruments_5 
                        90000                         90000 
            Office_Products_5       Patio_Lawn_and_Garden_5 
                        90000                         90000 
               Pet_Supplies_5                Prime_Pantry_5 
                        90000                         90000 
                   Software_5         Sports_and_Outdoors_5 
                        51930                         90000 
 Tools_and_Home_Improvement_5              Toys_and_Games_5 
                        90000                         90000 
                Video_Games_5 
                        90000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"📌 Sentiment Distribution:"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "📌 Sentiment Distribution:"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">table</span>(data<span class="sc">$</span>sentiment))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
negative  neutral positive 
  103737   106711  2916737 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"📌 Length Category Distribution:"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "📌 Length Category Distribution:"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">table</span>(data<span class="sc">$</span>length))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  large  medium   small 
 594470  785052 1747663 </code></pre>
</div>
</div>
<section id="data-imbalance" class="level3">
<h3 class="anchored" data-anchor-id="data-imbalance">Data Imbalance</h3>
<p>The dataset consists of <strong>3,127,185 reviews</strong> across <strong>multiple product categories</strong> such as <strong>Books, Electronics, Beauty, and Fashion</strong>. The <strong><code>overall</code> rating</strong> shows a median value of <code>5.0</code>, indicating that the dataset is <strong>skewed towards positive reviews</strong>. This is further supported by the <strong>sentiment distribution</strong>, where <strong>2,874,077 (92%) of the reviews are positive</strong>, compared to <strong>125,878 neutral reviews and 127,230 negative reviews</strong>. This suggests a potential <strong>imbalance in sentiment</strong>, which may need adjustment if used for predictive modeling.</p>
</section>
<section id="review-length-difference" class="level3">
<h3 class="anchored" data-anchor-id="review-length-difference">Review Length Difference</h3>
<p>The <strong>category distribution</strong> shows that some categories, like <strong>Books (630,000 reviews)</strong> and <strong>Clothing, Shoes, and Jewelry (270,000 reviews)</strong>, have significantly more reviews than smaller categories such as <strong>Appliances (1,557 reviews)</strong>. Additionally, the <strong>review length distribution</strong> reveals that most reviews are <strong>small (1,748,268)</strong>, while medium-length and large reviews make up a smaller portion. This suggests that the majority of customer feedback is <strong>brief</strong>, which could impact text-based sentiment analysis. Understanding these distributions helps us determine whether <strong>resampling, data balancing, or filtering</strong> is necessary for fair and accurate analysis.</p>
<ul>
<li><p>If some categories <strong>dominate the dataset</strong>, analysis might be <strong>biased</strong> toward those categories.</p></li>
<li><p>If a category has <strong>too few reviews</strong>, it may need <strong>oversampling or exclusion</strong> to ensure statistical significance.</p></li>
<li><p>It helps in making <strong>business and research decisions</strong>, such as identifying which product types receive more customer engagement.</p></li>
</ul>
</section>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section"></h3>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>